<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Library</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>

<style>
  body {
    margin: 0;
    font-family: "Segoe UI", system-ui, sans-serif;
    background: #0f1115;
    color: #e6e6e6;
  }

  header {
    padding: 18px 22px;
    font-size: 18px;
    font-weight: 500;
    border-bottom: 1px solid #1f2228;
    letter-spacing: 0.3px;
  }

  .library {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 22px;
    padding: 22px;
  }

  .book {
    background: #151821;
    border-radius: 12px;
    padding: 12px;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .book:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 28px rgba(0,0,0,0.6);
  }

  .cover {
    background: #000;
    border-radius: 8px;
    overflow: hidden;
    aspect-ratio: 3 / 4;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  canvas {
    width: 100%;
    height: auto;
  }

  .title {
    margin-top: 10px;
    font-size: 14px;
    font-weight: 500;
    color: #f1f1f1;
    line-height: 1.3;
  }

  .subtitle {
    font-size: 12px;
    color: #9aa0aa;
    margin-top: 2px;
  }

  @media (max-width: 600px) {
    header {
      font-size: 16px;
    }
  }
</style>
</head>

<body>

<header>My Library</header>

<div class="library" id="library"></div>

<script>
  const books = [
    { file: "book1.pdf", title: "Book One", author: "Author Name" },
    { file: "book2.pdf", title: "Book Two", author: "Author Name" },
    { file: "book3.pdf", title: "Book Three", author: "Author Name" }
  ];

  const library = document.getElementById("library");

  books.forEach((b, i) => {
    const card = document.createElement("div");
    card.className = "book";
    card.innerHTML = `
      <div class="cover"><canvas id="c${i}"></canvas></div>
      <div class="title">${b.title}</div>
      <div class="subtitle">${b.author}</div>
    `;
    card.onclick = () => {
      location.href =
        `reader.html?pdf=${b.file}&title=${encodeURIComponent(b.title)}`;
    };
    library.appendChild(card);

    renderCover("pdfs/" + b.file, document.getElementById("c" + i));
  });

  function renderCover(url, canvas) {
    pdfjsLib.getDocument(url).promise.then(pdf => {
      pdf.getPage(1).then(page => {
        const viewport = page.getViewport({ scale: 0.7 });
        canvas.width = viewport.width;
        canvas.height = viewport.height;
        page.render({
          canvasContext: canvas.getContext("2d"),
          viewport
        });
      });
    });
  }
</script>

</body>
</html>
